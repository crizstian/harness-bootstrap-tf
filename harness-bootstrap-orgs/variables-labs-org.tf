variable "cristiab_lab_org_projects" {
  default = {
    enable      = true
    description = "Cristian Labs bootstrap - Organization generated by terraform harness provider"
    projects = {
      "Harness Cinemas Seed" = {
        enable      = true
        description = "Harness-TF Cinemas Bootstrap - Project generated by terraform harness provider"
      }
    }
  }
}

locals {
  harness_platform_projects = tomap({
    "cristiab-lab-org" = var.cristiab_lab_org_projects
  })

  harness_platform_connectors = merge(
    local.cristiab_lab_org_connectors
  )

  cristiab_lab_org_connectors = {
    github = {
      cinemas-git = {
        enable          = true
        description     = "Github Cinemas - Connector generated by terraform harness provider"
        connection_type = "Account"
        url             = "https://github.com/Crizstian"
        # delegate_selectors = ["local-environment"]
        validation_repo = "harness-as-code"
        org_id          = module.bootstrap_harness.project["Harness Cinemas Seed"].org_id
        project_id      = module.bootstrap_harness.project["Harness Cinemas Seed"].identifier
        credentials = {
          http = {
            username  = "crizstian"
            token_ref = var.harness_connectors_crizstian_github_token
          }
        }
      }
    }
    docker = {
      crizstian = {
        enable      = false
        description = "Connector generated by terraform harness provider"
        tags        = ["local:environment"]
        # delegate_selectors = ["local-environment"]
        org_id = ""
        type   = "DockerHub"
        url    = "https://registry.hub.docker.com/v1/"
        credentials = {
          username = "crizstian"
          # password_ref = var.harness_connectors_crizstian_docker_token
        }
      }
    }
  }
}
